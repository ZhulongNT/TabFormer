# CNB pipeline: Use python:3.15-rc-bookworm, install requirements, run training
main:
  push:
    - docker:
        image: python:3.15-rc-bookworm
      stages:
        - apt-get update
        - pip install --prefer-binary --cache-dir=.pip-cache -r pip_freeze_output.txt
        - tar -xzf ./data/credit_card/transactions.tgz -C ./data/credit_card card_transaction.v1.csv
        - python main.py --do_train --mlm --field_ce --lm_type bert --field_hs 64 --data_type card --output_dir ./output